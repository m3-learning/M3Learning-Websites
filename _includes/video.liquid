{% assign extension = include.path | split: '.' | last %}

<figure>
  {% if extension == 'mp4' or extension == 'webm' or extension == 'ogg' %}
    <video
      src="{% if include.cache_bust %}{{ include.path | relative_url | bust_file_cache }}{% else %}{{ include.path | relative_url }}{% endif %}"
      class="{{ include.class | default: '' }}"
      width="{{ include.width | default: 'auto' }}"
      height="{{ include.height | default: 'auto' }}"
      min-width="{{ include['min-width'] | default: '' }}"
      min-height="{{ include['min-height'] | default: '' }}"
      max-width="{{ include['max-width'] | default: '' }}"
      max-height="{{ include['max-height'] | default: '' }}"
      title="{{ include.title | default: '' }}"
      alt="{{ include.alt | default: '' }}"
      {% if include.autoplay %} autoplay {% endif %}
      {% if include.controls %} controls {% endif %}
      {% if include.loop %} loop {% endif %}
      {% if include.muted %} muted {% endif %}
      {% if include.poster %} poster="{{ include.poster }}" {% endif %}
    ></video>

  {% else %}
    <iframe
      src="{{ include.path }}"
      class="{{ include.class | default: '' }}"
      frameborder="0"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
      allowfullscreen
      width="{{ include.width | default: 'auto' }}"
      height="{{ include.height | default: 'auto' }}"
      min-width="{{ include['min-width'] | default: '' }}"
      min-height="{{ include['min-height'] | default: '' }}"
      max-width="{{ include['max-width'] | default: '' }}"
      max-height="{{ include['max-height'] | default: '' }}"
      title="{{ include.title | default: '' }}"
      alt="{{ include.alt | default: '' }}"
    ></iframe>
  {% endif %}
  
  {% if include.caption %}
    <figcaption class="caption">{{ include.caption }}</figcaption>
  {% endif %}
</figure>
